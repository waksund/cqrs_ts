# Books shop

Бэкенд для книжного магазина.
Предоставляет следующие функции:
1. Начать регистрацию. При этом создается пользователь в БД и ему на почту отправляется код подтверждения.
2. Залогиниться. Пользователь уже должен быть создан в системе. Ему на почту отправляется код подтверждения.
3. Подтвердить временный код. Если пользователь ранее не был зарегистрирован, то при этом действии происходит пометка о его регистрации, начисления бонусов и отправка письма с подтверждением.
4. Создать книгу. При этом действии происходит сохранение книги в БД.
5. Оценить книгу. При этом действии происходит сохранение оценки от 0 до 5 в БД.
6. Получить список книг. Метод возвращает список книг с информацией об авторе и средней оценкой.

### Первый вариант решения
Представляет из себя приложение, где вся бизнес логика, логика работы с провайдерами и БД находится в контроллерах.

Приложение лежит в папке `apps/spaghetti`

### Второй вариант решения
Два приложения. Одно предоставляет Command функциональность, а второе отвечает за запросы. Слой Application представлен в виде набора сервисов.

Приложение лежит в папках
* `apps/services-write` – query-часть
* `apps/services-read` – command-часть

### Третий вариант решения
Как и во втором – представляет из себя два приложения – Command и Query. Оба приложения построены c использованием команд и CommandBus.

Приложение лежит в папках
* `apps/commands-write` – query-часть
* `apps/commands-read` – command-часть

## Переменные окружения

* APP_PORT [3000]
* DB_URL [postgres://user_name:user_password@localhost:5432/cqrs_ts]
* DB_LOGGING [true]
* REDIS_HOST
* REDIS_PASSWORD
* REDIS_PORT

## Scripts

```shell
npm run start:spaghetti
```

```shell
npm run start:services-write
```

```shell
npm run start:services-read
```

```shell
npm run start:commands-write
```

```shell
npm run start:commands-read
```


